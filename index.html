  <!doctype html>
    <html lang="en">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>Little SF</title>
      <meta name="description" content="Family-friendly events in San Francisco" />
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;600;700&display=swap" rel="stylesheet" />
      <link rel="icon" href="/favicon.ico" sizes="any" />
      <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png" />
      <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png" />
      <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
      <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-chrome-192x192.png" />
      <link rel="icon" type="image/png" sizes="512x512" href="/assets/icons/android-chrome-512x512.png" />
      <link rel="manifest" href="/site.webmanifest" />
      <meta name="theme-color" content="#0ea5e9" />
      <style>
        body { font-family: 'Nunito', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; font-weight: 300; line-height: 1.6; margin: 0; color: #0f172a; }
        header { padding: 64px 24px; text-align: center; background: #f8fafc; }
        h1 { margin: 0 0 12px; font-size: 40px; font-weight: 700; }
        p { margin: 0; font-size: 18px; color: #334155; font-weight: 300; }
        main { padding: 32px 24px; max-width: 880px; margin: 0 auto; }
        a.button, button.button { display: inline-flex; align-items: center; justify-content: center; margin-top: 20px; padding: 12px 16px; background: #0ea5e9; color: white; border-radius: 8px; text-decoration: none; border: none; cursor: pointer; font-size: 16px; font-weight: 600; line-height: 1; }
        #icsCopyButton { font-weight: 300; }
        #openContact { font-weight: 300; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(15, 23, 42, 0.55); display: none; align-items: center; justify-content: center; padding: 16px; z-index: 1000; }
        .modal-overlay.open { display: flex; }
        .modal { background: #ffffff; border-radius: 12px; max-width: 760px; width: 100%; box-shadow: 0 10px 30px rgba(2, 6, 23, 0.2); }
        .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; border-bottom: 1px solid #e2e8f0; }
        .modal-header h2 { margin: 0; font-size: 20px; }
        .modal-close { background: transparent; border: none; font-size: 24px; line-height: 1; cursor: pointer; color: #334155; padding: 4px; }
        .modal-body { padding: 16px 20px 20px; }
        .modal-body p { margin: 0 0 12px; }
        .modal-body ul { margin: 0 0 12px 20px; }
        .copy-row { display: flex; gap: 8px; align-items: center; margin: 12px 0 16px; }
        .copy-input { width: 100%; box-sizing: border-box; padding: 10px 12px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 14px; }
        .copy-btn { padding: 10px 12px; background: #0ea5e9; color: #fff; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; }
        .small { font-size: 14px; color: #475569; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
        .brand { display: inline-flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .brand-logo { height: 64px; width: auto; display: block; border-radius: 12px; box-shadow: 0 6px 16px rgba(2, 6, 23, 0.08); }
        @media (min-width: 640px) { .brand-logo { height: 80px; } }
      </style>
    </head>
    <body>
      <header>
        <div class="brand">
          <img class="brand-logo" src="littlesf_logo.png" alt="Little SF" width="160" height="160" />
        </div>
        <h1>Little SF</h1>
        <p>Curated family-friendly events in San Francisco.</p>
        <a class="button" href="https://events.littlesf.com" rel="noopener">Browse events</a>
        <button class="button" id="icsCopyButton" type="button" data-ics="https://events.littlesf.com/calendar/all.ics">Subscribe (ICS) ðŸ“‹</button>
      </header>
      <main>
        <p>Being a parent is hardâ€”and keeping growing minds engaged is even harder. Little SF curates the best publicly available, familyâ€‘friendly events around San Francisco.</p>
        <ul style="margin: 12px 0 0 20px;">
          <li><strong>Curated and current</strong>: We sift through community calendars to highlight highâ€‘quality events.</li>
          <li><strong>View or subscribe</strong>: Browse a clean calendar view, or subscribe to the live ICS link to get new events automatically.</li>
          <li><strong>Always free</strong>: No account. No spam. Just great local activities.</li>
        </ul>
        <p style="margin-top: 12px;">Expect museum free days, outdoor festivals, library programs, neighborhood fairs, and moreâ€”each with date, location, and helpful details when available.</p>
        <div style="margin-top: 28px; text-align: center;">
          <button class="button" id="openContact" type="button">Contact / Feedback</button>
        </div>
      </main>
      <div id="subscribeModal" class="modal-overlay" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="subscribeModalTitle">
          <div class="modal-header">
            <h2 id="subscribeModalTitle">Subscribe to Little SF calendar</h2>
            <button class="modal-close" id="subscribeModalClose" aria-label="Close">Ã—</button>
          </div>
          <div class="modal-body">
            <p><strong>Copied!</strong> The ICS link is on your clipboard. Paste it into your calendar app to subscribe.</p>
            <div class="copy-row">
              <input id="icsInput" class="copy-input" type="text" readonly value="https://events.littlesf.com/calendar/all.ics" aria-label="ICS calendar URL" />
              <button id="icsCopyAgain" class="copy-btn" type="button">Copy again</button>
            </div>
            <p class="small">Subscribing keeps your calendar updated automatically when new events are added.</p>
            <ul>
              <li><strong>Google Calendar</strong>: On desktop, open Google Calendar â†’ left sidebar, select <em>Other calendars</em> â†’ <em>Add</em> â†’ <em>From URL</em>, then paste the link. Video guide: <a href="https://www.youtube.com/watch?v=xGOMsz22XTU" target="_blank" rel="noopener">Watch on YouTube</a>.</li>
              <li><strong>Apple Calendar</strong> (iPhone, iPad, Mac): Follow Appleâ€™s steps to add a subscribed calendar, then paste the link when prompted. Official guide: <a href="https://support.apple.com/en-us/102301" target="_blank" rel="noopener">Apple support</a>.</li>
              <li><strong>Outlook (web)</strong>: Open Outlook.com â†’ Calendar â†’ <em>Add calendar</em> â†’ <em>Subscribe from web</em>, then paste the link. Instructions: <a href="https://support.microsoft.com/en-us/office/import-or-subscribe-to-a-calendar-in-outlook-com-or-outlook-on-the-web-cff1429c-5af6-41ec-a5b4-74f2c278e98c" target="_blank" rel="noopener">Microsoft support</a>.</li>
            </ul>
          </div>
        </div>
      </div>
      <div id="contactModal" class="modal-overlay" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="contactModalTitle">
          <div class="modal-header">
            <h2 id="contactModalTitle">Contact / Feedback</h2>
            <button class="modal-close" id="contactModalClose" aria-label="Close">Ã—</button>
          </div>
          <div class="modal-body">
            <p>Please share your thoughts. We read every message.</p>
            <form id="contactForm" method="POST" novalidate>
              <input type="hidden" name="access_key" value="e3f30a0f-26df-451e-b92e-85c286bede2f" />
              <input type="hidden" name="user_agent" />
              <input type="hidden" name="platform" />
              <input type="hidden" name="page_url" />
              <input type="hidden" name="referrer" />
              <input type="hidden" name="domain" />
              <div style="display: grid; gap: 12px; margin: 12px 0;">
                <label>
                  <span class="sr-only">Your name</span>
                  <input name="name" type="text" placeholder="Your name" required class="copy-input" />
                </label>
                <label>
                  <span class="sr-only">Your email</span>
                  <input name="email" type="email" placeholder="Your email" required class="copy-input" />
                </label>
                <label>
                  <span class="sr-only">Message</span>
                  <textarea name="message" rows="5" placeholder="Your message" required class="copy-input"></textarea>
                </label>
                <div class="h-captcha" data-captcha="true"></div>
                <button id="contactSubmit" class="copy-btn" type="submit">Send</button>
              </div>
              <p id="contactStatus" class="small" aria-live="polite" style="min-height: 20px;"></p>
            </form>
          </div>
        </div>
      </div>
      <script>
        (function() {
          var icsUrl = 'https://events.littlesf.com/calendar/all.ics';
          var openClass = 'open';
          var modalOverlay = document.getElementById('subscribeModal');
          var closeBtn = document.getElementById('subscribeModalClose');
          var copyBtn = document.getElementById('icsCopyButton');
          var copyAgainBtn = document.getElementById('icsCopyAgain');
          var icsInput = document.getElementById('icsInput');

          function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
              return navigator.clipboard.writeText(text).catch(function() {
                // Fallback below
                fallbackCopy(text);
              });
            } else {
              return fallbackCopy(text);
            }
          }

          function fallbackCopy(text) {
            try {
              var tmp = document.createElement('textarea');
              tmp.value = text;
              tmp.setAttribute('readonly', '');
              tmp.style.position = 'fixed';
              tmp.style.top = '-9999px';
              document.body.appendChild(tmp);
              tmp.select();
              document.execCommand('copy');
              document.body.removeChild(tmp);
            } catch (e) {
              // no-op
            }
          }

          function openModal() {
            if (!modalOverlay) return;
            modalOverlay.classList.add(openClass);
            modalOverlay.setAttribute('aria-hidden', 'false');
            // Focus close for accessibility
            if (closeBtn) closeBtn.focus();
          }

          function closeModal() {
            if (!modalOverlay) return;
            modalOverlay.classList.remove(openClass);
            modalOverlay.setAttribute('aria-hidden', 'true');
          }

          if (copyBtn) {
            copyBtn.addEventListener('click', function() {
              copyToClipboard(icsUrl);
              if (icsInput) icsInput.value = icsUrl;
              openModal();
            });
          }

          if (copyAgainBtn) {
            copyAgainBtn.addEventListener('click', function() {
              copyToClipboard(icsUrl);
              if (icsInput) {
                icsInput.focus();
                icsInput.select();
              }
            });
          }

          if (closeBtn) {
            closeBtn.addEventListener('click', closeModal);
          }

          if (modalOverlay) {
            modalOverlay.addEventListener('click', function(e) {
              if (e.target === modalOverlay) closeModal();
            });
          }

          document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
          });
        })();
      </script>
      <script>
        (function() {
          var openClass = 'open';
          var contactOverlay = document.getElementById('contactModal');
          var openBtn = document.getElementById('openContact');
          var closeBtn = document.getElementById('contactModalClose');
          var form = document.getElementById('contactForm');
          var statusEl = document.getElementById('contactStatus');
          var submitBtn = document.getElementById('contactSubmit');

          function openContact() {
            if (!contactOverlay) return;
            contactOverlay.classList.add(openClass);
            contactOverlay.setAttribute('aria-hidden', 'false');
            if (closeBtn) closeBtn.focus();
          }

          function closeContact() {
            if (!contactOverlay) return;
            contactOverlay.classList.remove(openClass);
            contactOverlay.setAttribute('aria-hidden', 'true');
          }

          if (openBtn) openBtn.addEventListener('click', openContact);
          if (closeBtn) closeBtn.addEventListener('click', closeContact);
          if (contactOverlay) {
            contactOverlay.addEventListener('click', function(e) {
              if (e.target === contactOverlay) closeContact();
            });
          }
          document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeContact();
          });

          function setStatus(text, isError) {
            if (!statusEl) return;
            statusEl.textContent = text || '';
            statusEl.style.color = isError ? '#b91c1c' : '#475569';
          }

          function setSubmitting(isSubmitting) {
            if (!submitBtn) return;
            submitBtn.disabled = !!isSubmitting;
            submitBtn.textContent = isSubmitting ? 'Sendingâ€¦' : 'Send';
          }

          if (form) {
            form.addEventListener('submit', function(e) {
              e.preventDefault();
              setStatus('');

              // Populate meta fields so they appear in the submission email
              try {
                var uaInput = form.querySelector('input[name="user_agent"]');
                var platformInput = form.querySelector('input[name="platform"]');
                var pageUrlInput = form.querySelector('input[name="page_url"]');
                var refInput = form.querySelector('input[name="referrer"]');
                var domainInput = form.querySelector('input[name="domain"]');
                if (uaInput) uaInput.value = navigator.userAgent || '';
                var plat = (navigator.userAgentData && navigator.userAgentData.platform) || navigator.platform || '';
                if (platformInput) platformInput.value = plat;
                if (pageUrlInput) pageUrlInput.value = window.location && window.location.href ? window.location.href : '';
                if (refInput) refInput.value = document.referrer || '';
                if (domainInput) domainInput.value = window.location && window.location.hostname ? window.location.hostname : '';
              } catch (ignore) {}

              var data = new FormData(form);
              var accessKey = data.get('access_key');
              if (!accessKey || accessKey === 'YOUR_WEB3FORMS_ACCESS_KEY') {
                setStatus('Please add your Web3Forms access key first.', true);
                return;
              }

              // Require hCaptcha client token before sending
              var hCaptchaField = form.querySelector('textarea[name="h-captcha-response"]');
              if (!hCaptchaField || !hCaptchaField.value) {
                setStatus('Please complete the Captcha.', true);
                return;
              }

              setSubmitting(true);
              fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                body: data
              }).then(function(res) { return res.json(); })
                .then(function(json) {
                  if (json && (json.success || json.message === 'Submission successful')) {
                    setStatus('Thanks! Your message has been sent.');
                    form.reset();
                    setTimeout(closeContact, 900);
                  } else {
                    setStatus('Sorry, something went wrong. Please try again later.', true);
                  }
                })
                .catch(function() {
                  setStatus('Network error. Please try again.', true);
                })
                .finally(function() {
                  setSubmitting(false);
                });
            });
          }
        })();
      </script>
      <script src="https://web3forms.com/client/script.js" async defer></script>
    </body>
    </html>
